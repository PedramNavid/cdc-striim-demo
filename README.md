## CDC Demo

### Initial Setup

Update the `.env` file to add a [database url](https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING):

```sh
DATABASE_URL="postgresql://USERNAME:password@12.34.56.789:5432/postgres"
```

Install python requirements with:

```sh
pip install -r requirements.txt
```

### Inserting Events

Make sure you have whitelisted access to the postgres
instance from your IP then run `generate_events.py`

```sh
python generate_events.py
```

### Schema

This demo creates events using the schema generated by the excellent
[fake-web-events](https://pypi.org/project/fake-web-events/) python package.

A table named `web_events` will be created with
three columns: `event_id, event_time, and payload`

The `payload` column will contain a json schema that
looks like this:

```json
{
  "event_timestamp": "2020-07-05 14:32:45.407110",
  "event_type": "pageview",
  "page_url": "http://www.dummywebsite.com/home",
  "page_url_path": "/home",
  "referer_url": "www.instagram.com",
  "referer_url_scheme": "http",
  "referer_url_port": "80",
  "referer_medium": "internal",
  "utm_medium": "organic",
  "utm_source": "instagram",
  "utm_content": "ad_2",
  "utm_campaign": "campaign_2",
  "click_id": "b6b1a8ad-88ca-4fc7-b269-6c9efbbdad55",
  "geo_latitude": "41.75338",
  "geo_longitude": "-86.11084",
  "geo_country": "US",
  "geo_timezone": "America/Indiana/Indianapolis",
  "geo_region_name": "Granger",
  "ip_address": "209.139.207.244",
  "browser_name": "Firefox",
  "browser_user_agent": "Mozilla/5.0 (Macintosh; U; PPC Mac OS X 10_5_5; rv:1.9.6.20) Gecko/2012-06-06 09:24:19 Firefox/3.6.20",
  "browser_language": "tn_ZA",
  "os": "Android 2.0.1",
  "os_name": "Android",
  "os_timezone": "America/Indiana/Indianapolis",
  "device_type": "Mobile",
  "device_is_mobile": true,
  "user_custom_id": "vsnyder@hotmail.com",
  "user_domain_id": "3d648067-9088-4d7e-ad32-45d009e8246a"
}
```


